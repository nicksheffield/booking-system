<header class="page-header" layout="row" align="center" justify="between">
	<h1>Booking: {{ booking.pickup_at | date }}</h1>

	<div class="button-row">
		<btn url="#/booking/{{ booking.id }}/edit" type="info" icon="pencil" small ng-show="booking._priority == 1">Edit</btn>
		<btn url="#/booking/{{ booking.id }}/issue" icon="arrow-right" small ng-show="booking._priority == 1">Issue</btn>
		<btn url="#/booking/{{ booking.id }}/return" icon="arrow-left" small ng-show="booking._priority == 2">Return</btn>
	</div>
</header>

<breadcrumbs></breadcrumbs>

<div class="page-content" ratio="1">

	<table class="table data-table">
		<tr>
			<td class="row-property">By</td>
			<td class="row-value">{{ booking.user.name }}</td>
		</tr>
		<tr>
			<td class="row-property">Status</td>
			<td class="row-value">{{ booking._status }}</td>
		</tr>
		<tr>
			<td class="row-property">Created at</td>
			<td class="row-value">{{ booking.created_at | date }}</td>
		</tr>
	</table>

	<table class="table data-table">
		<tr>
			<td class="row-property">Pickup at</td>
			<td class="row-value">{{ booking.pickup_at | date }}</td>
			<td class="row-property">Issued at</td>
			<td class="row-value">{{ booking.taken_at | date }}</td>
		</tr>
		<tr>
			<td class="row-property">Due at</td>
			<td class="row-value">{{ booking.due_at | date }}</td>
			<td class="row-property">Returned at</td>
			<td class="row-value">
				{{ booking.closed_at | date }} 
				<span ng-show="booking.closed_at && return_difference > 0">
					(Late by {{ return_difference }} hours)
				</span>
			</td>
		</tr>
	</table>

	<section>
		<table class="table">
			<tr>
				<th>Name</th>
				<th>Unit</th>
				<th>Notes</th>
				<th>Returned at</th>
			</tr>
			<tr ng-repeat="product in booking.products">
				<td>{{ product.name }}</td>
				<td>{{ product.pivot.unit_id ? unit(product.pivot.unit_id).unit_number : 'Not issued yet' }}</td>
				<td>{{ product.pivot.notes }}</td>
				<td>{{ product.pivot.returned_at | date }}</td>
			</tr>
		</table>
	</section>
	
</div>