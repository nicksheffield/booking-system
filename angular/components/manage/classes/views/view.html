<sidebar></sidebar>

<div class="frame manage" ratio="1" ng-show="!error">
	
	<header class="page-header" layout="row" align="center" justify="between">
		<h1>Class: {{ group.code }}</h1>
		
		<div class="button-row">
			<btn url="#/manage/class/{{ group.id }}/allowed_products" small icon="camera">Allowed Products</btn>
			<btn url="#/manage/class/{{ group.id }}/edit" icon="pencil" small>Edit</btn>
			<btn ng-click="delete()" icon="trash" type="danger" small></btn>
		</div>
	</header>
	
	<breadcrumbs></breadcrumbs>
	
	<div class="page-content">
	
		<table class="table data-table">
			<tr>
				<td class="row-property">Code</td>
				<td class="row-value">{{ group.code }}</td>
			</tr>
			<tr>
				<td class="row-property">Type</td>
				<td class="row-value"><a href="#/manage/class_type/{{ group.type.id }}">{{ group.type.name }}</a></td>
			</tr>
			<tr>
				<td class="row-property">Tutor<span ng-show="group.tutors.length > 1">s</span></td>
				<td class="row-value">
					<ul ng-show="group.tutors.length > 1">
						<li ng-repeat="user in group.tutors">
							<a href="#/manage/user/{{ user.id }}">{{ user.first_name }} {{ user.last_name }}</a>
						</li>
					</ul>
					<a href="#/manage/user/{{ group.tutors[0].id }}" ng-show="group.tutors.length == 1">
						{{ group.tutors[0].first_name }} {{ group.tutors[0].last_name }}
					</a>
				</td>
			</tr>
			<tr>
				<td class="row-property">Students ({{ group.users.length }})</td>
				<td class="row-value">
					<div layout="row" align="start" justify="between" ng-show="group.users.length">
						<ul>
							<li ng-repeat="user in group.users">
								<a href="#/manage/user/{{ user.id }}">{{ user.first_name }} {{ user.last_name }}</a>
							</li>
						</ul>
						
						<btn url="#/manage/user/new" ng-click="preNewUser()" small ng-if="group.users.length" icon="plus"></btn>
					</div>
					
					<alert type="info" text="No students in this class" icon="exclamation-circle" ng-if="!group.users.length">
						<btn url="#/manage/user/new" ng-click="preNewUser()" small icon="plus">Create one</btn>
					</alert>
				</td>
			</tr>
			<tr>
				<td class="row-property">Allowed Products ({{ group.allowed_products.length }})</td>
				<td class="row-value">
					<div ng-show="group.allowed_products.length" layout="row" align="start" justify="between">
						<ul>
							<li ng-repeat="product in group.allowed_products">
								<a href="#/manage/product/{{ product.id }}">{{ product.name }}</a>
							</li>
						</ul>
					</div>
					
					<alert type="info" text="This class is not allowed to book anything" icon="exclamation-circle" ng-if="!group.allowed_products.length"></alert>
				</td>
			</tr>
		</table>

	</div>
	
</div>